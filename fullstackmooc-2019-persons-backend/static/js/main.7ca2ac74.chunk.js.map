{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Persons.js","components/Notification.js","services/persons.js","App.js","index.js"],"names":["Filter","_ref","value","handler","react_default","a","createElement","onChange","PersonForm","submitHandler","name","nameChangeHandler","number","numberChangeHandler","onSubmit","type","Persons","persons","deleteHandler","map","person","key","id","onClick","Notification","props","notification","_props$notification","message","className","concat","baseUrl","services_persons","console","log","axios","get","then","allPersons","data","newObject","post","created","updatedObject","put","updated","delete","response","App","_useState","useState","_useState2","Object","slicedToArray","setPersons","_useState3","_useState4","newName","setNewName","_useState5","_useState6","newNumber","setNewNumber","_useState7","_useState8","search","setSearch","_useState9","_useState10","searchResults","setSearchResults","_useState11","_useState12","setNotification","_useState13","_useState14","notificationClear","setNotificationClear","useEffect","personService","notify","length","catch","error","clearTimeout","setTimeout","components_Notification","components_Filter","event","target","filter","toLowerCase","includes","components_PersonForm","preventDefault","existing","find","window","confirm","updatePerson","objectSpread","updatedPerson","newPerson","createdPerson","components_Persons","p","status","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.7ca2ac74.chunk.js","sourcesContent":["import React from 'react';\n\nconst Filter = ({ value, handler }) => (\n  <div>\n    rajaa näytettäviä: <input value={value} onChange={handler} />\n  </div>\n);\n\nexport default Filter;\n","import React from 'react';\n\nconst PersonForm = ({\n  submitHandler,\n  name,\n  nameChangeHandler,\n  number,\n  numberChangeHandler\n}) => (\n  <form onSubmit={submitHandler}>\n    <div>\n      nimi: <input value={name} onChange={nameChangeHandler} />\n    </div>\n    <div>\n      numero: <input value={number} onChange={numberChangeHandler} />\n    </div>\n    <div>\n      <button type=\"submit\">lisää</button>\n    </div>\n  </form>\n);\n\nexport default PersonForm;\n","import React from 'react';\n\nconst Persons = ({ persons, deleteHandler }) =>\n  persons.map(person => (\n    <p key={person.id}>\n      {person.name} {person.number}{' '}\n      <button onClick={() => deleteHandler(person)}>poista</button>\n    </p>\n  ));\n\nexport default Persons;\n","import React from 'react';\n\nconst Notification = props => {\n  if (props.notification === null) {\n    return null;\n  }\n\n  const { message, type } = props.notification;\n\n  return <div className={`notification ${type}`}>{message}</div>;\n};\n\nexport default Notification;\n","import axios from 'axios';\n\nconst baseUrl = 'https://sleepy-wildwood-86540.herokuapp.com/api/persons';\n\nconst getAll = () => {\n  console.log('getAll');\n  const request = axios.get(baseUrl);\n  return request.then(allPersons => allPersons.data);\n};\n\nconst create = newObject => {\n  console.log('create', newObject);\n  const request = axios.post(baseUrl, newObject);\n  return request.then(created => created.data);\n};\n\nconst update = updatedObject => {\n  console.log('update', updatedObject);\n  const request = axios.put(`${baseUrl}/${updatedObject.id}`, updatedObject);\n  return request.then(updated => updated.data);\n};\n\nconst remove = id => {\n  console.log('remove', id);\n  const request = axios.delete(`${baseUrl}/${id}`);\n  return request.then(response => response);\n};\n\nexport default { getAll, create, update, remove };\n","import React, { useState, useEffect } from 'react';\nimport Filter from './components/Filter';\nimport PersonForm from './components/PersonForm';\nimport Persons from './components/Persons';\nimport Notification from './components/Notification';\nimport personService from './services/persons';\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState('');\n  const [newNumber, setNewNumber] = useState('');\n  const [search, setSearch] = useState('');\n  const [searchResults, setSearchResults] = useState([]);\n  const [notification, setNotification] = useState(null);\n  const [notificationClear, setNotificationClear] = useState(null);\n\n  const successType = 'success';\n  const errorType = 'error';\n\n  useEffect(() => {\n    personService\n      .getAll()\n      .then(allPersons => {\n        setPersons(allPersons);\n        notify(`Moro! Tiedot haettu (${allPersons.length} kpl)`);\n      })\n      .catch(error => {\n        notify('Tietojen haku epäonnistui', errorType);\n      });\n  }, []);\n\n  const nameChangeHandler = event => setNewName(event.target.value);\n  const numberChangeHandler = event => setNewNumber(event.target.value);\n  const searchChangeHandler = event => {\n    setSearch(event.target.value);\n    setSearchResults(\n      persons.filter(person =>\n        person.name.toLowerCase().includes(event.target.value.toLowerCase())\n      )\n    );\n  };\n\n  const notify = (message, type) => {\n    clearTimeout(notificationClear);\n\n    setNotification({\n      message,\n      type\n    });\n\n    setNotificationClear(\n      setTimeout(() => {\n        setNotification(null);\n        setNotificationClear(null);\n      }, 5000)\n    );\n  };\n\n  const deletePerson = person => {\n    if (window.confirm(`Poistetaanko ${person.name} ?`)) {\n      personService\n        .remove(person.id)\n        .then(() => {\n          setPersons(persons.filter(p => p.id !== person.id));\n          notify(`${person.name} poistettu`, successType);\n        })\n        .catch(error => {\n          if (error.response.status === 404) {\n            notify(`${person.name} oli jo poistettu!`, errorType);\n            setPersons(persons.filter(p => p.id !== person.id));\n          } else {\n            notify(`${person.name} poisto epäonnistui!`, errorType);\n          }\n        });\n    }\n  };\n\n  const addPerson = event => {\n    event.preventDefault();\n    const existing = persons.find(person => person.name === newName);\n\n    if (existing) {\n      if (\n        window.confirm(\n          `${existing.name} on jo olemaassa. Korvataanko vanha numero uudella?`\n        )\n      ) {\n        const updatePerson = { ...existing, number: newNumber };\n        personService\n          .update(updatePerson)\n          .then(updatedPerson => {\n            setPersons(\n              persons.map(person =>\n                person.id === updatedPerson.id ? updatedPerson : person\n              )\n            );\n            notify(`${updatePerson.name} päivitetty`, successType);\n            setNewName('');\n            setNewNumber('');\n          })\n          .catch(error => {\n            notify(`${updatePerson.name} päivitys epäonnisui`, errorType);\n          });\n      }\n    } else {\n      const newPerson = { name: newName, number: newNumber };\n\n      personService\n        .create(newPerson)\n        .then(createdPerson => {\n          setPersons(persons.concat(createdPerson));\n          notify(`${newPerson.name} lisätty`, successType);\n          setNewName('');\n          setNewNumber('');\n        })\n        .catch(error => {\n          notify(`${newPerson.name} lisäys epäonnisui`, errorType);\n        });\n    }\n  };\n\n  return (\n    <div>\n      <h1>Puhelinluettelo</h1>\n      <Notification notification={notification} />\n      <Filter value={search} handler={searchChangeHandler} />\n      <h2>lisää uusi</h2>\n      <PersonForm\n        submitHandler={addPerson}\n        name={newName}\n        nameChangeHandler={nameChangeHandler}\n        number={newNumber}\n        numberChangeHandler={numberChangeHandler}\n      />\n      <h2>Numerot</h2>\n      <Persons\n        persons={search !== '' ? searchResults : persons}\n        deleteHandler={deletePerson}\n      />\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}